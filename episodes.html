<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="node_modules/@fortawesome/fontawesome-free/css/all.min.css">
</head>

<body class="bg-dark" style="-webkit-app-region: drag; -webkit-user-select: none;">
  <div class="container pt-5">
    <div class="row">
      <div class="col-4">
        <div id="show-details" class="position-fixed mt-3"><!-- #show-details-template --></div>
      </div>
      <div class="col-8">
        <div id="episode-list"><!-- #episode-list-template --></div>
      </div>
    </div>
  </div>

  <!-- Handlebars.js templates instead of straight HTML -->

  <script id="show-details-template" type="text/x-handlebars-template">
    <img class="rounded" src="{{image.medium}}" title="{{name}}">
    <div class="mt-2">
      <div hidden id="show-name">{{name}}</div><!-- this is a hack to embed the current show name -->
      <div>
        <span class="badge badge-warning">{{type}}</span>
        {{#each genres}}
          <span class="badge badge-warning">{{this}}</span>
        {{/each}}
      </div>
      <div>
        <span class="badge badge-primary">{{network.country.code}}</span>
        <span class="badge badge-primary">{{network.name}}</span>
      </div>
      <div>
        <span class="badge badge-secondary">{{runtime}} minutes</span>
      </div>
    </div>
  </script>

  <script id="episode-list-template" type="text/x-handlebars-template">
    <table class="table table-hover table-borderless text-white">
      {{#each _embedded.episodes}}
        <tr>
          <td>
            <button id="episode-magnet" type="button" class="btn btn-sm btn-link pt-0">
              <i class="fas fa-cloud-download-alt" title="Open magnet link"></i>
            </button>
          </td>
          <td id="episode-string" class="text-monospace" style="min-width: 8rem;">{{episode-string season number airdate}}</td>
          <td id="episode-name">{{name}}</td>
          <td id="episode-airdate" class="text-muted text-monospace" style="min-width: 7rem;"><small>{{airdate}}</small></td>
        </tr>
      {{/each}}
    </table>
  </script>

  <script>require('./episodes.js');</script>
</body>

</html>